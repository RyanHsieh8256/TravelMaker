<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>景點票券</title>
    <link rel="shortcut icon" href="images/logo/logo_84x50.png" type="image/png">
    <link rel="stylesheet" href="css/main.css">
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <!--放在head裡-->
    <script src="./js/jquery.js"></script>
    <script src="./js/vue.js"></script>
    
</head>
<body>
       <header>
        <!-- 導覽列 -->
<nav class="nav_Wrap">
    <section class="navBlock">
        <a href="home.html">
            <h1 class="navLogo">
                <img src="images/logo/logo_84x50.png" alt="TravelMaker">
            </h1>
        </a>
        <ul class="mainNav">
            <a href="tour.html"><li>行程規劃</li></a>
            <a href="group.html"><li>揪團旅行</li></a>
            <a href="shop.html"><li>景點門票</li></a>
            <a href="postcard.html"><li>客製明信片</li></a>
        </ul>
        <ul class="navMember">
            <li><a href="shopcart.html"><i class="bi bi-minecart-loaded"></i></a></li>
            <li>
                <div id="loginBoxBtn" class="loginBoxBtn">
                    <i class="bi bi-person-circle"></i><span>登入/註冊</span>
                </div>
                <div id="memBoxBtn" class="memBoxBtn">
                    <div class="memIcon">
                        <img id="memIcon" src="https://picsum.photos/50/50/?random=10">
                    </div>
                    <span id="memName"></span>
                </div>
                <!-- 登入後的會員選單-->
                <ul class="navDropdownMenu">
                    <li class="navDropdownMenuItem">
                        <a href="mem.html">
                            <i class="bi bi-gear"></i> 帳號設定
                        </a>
                    </li>
                    <li class="navDropdownMenuItem">
                        <a href="memtour.html">
                            <i class="bi bi-calendar2"></i> 我的行程
                        </a>
                    </li>
                    <li class="navDropdownMenuItem">
                        <a href="memcollect.html">
                            <i class="bi bi-bookmark-heart"></i> 我的收藏
                        </a>
                    </li>
                    <li class="navDropdownMenuItem">
                        <a href="memgro.html">
                            <i class="bi bi-file-person"></i> 我的揪團
                        </a>
                    </li>
                    <li class="navDropdownMenuItem">
                        <a href="memorder.html">
                            <i class="bi bi-bag"></i> 我的訂單
                        </a>
                    </li>
                    <li class="navDropdownMenuItem" id="logOutBtn">
                        <i class="bi bi-door-closed"></i> 登出
                    </li>
                </ul>
            </li>
            <li>
                <div class="burger-toggle">
                    <i class="bi bi-list"></i>
                </div>
            </li>
        </ul>
    </section>          
    </nav>
    <!-- 漢堡 -->
    <div class="navPage">
    <button class="navPage--close">
        <span class="close_line"></span>
        <span class="close_line"></span>
        </button>
    <div class="navPage_wrap">
    <!--     <div class="navPage_header"></div> -->
        <div class="navPage_content">
    <!--       <div class="navPage_logo"></div> -->
            <div class="navPage_box">
                <nav class="navPage_nav">
                    <ul class="navPage_list">
                        <li class="navPage_item">
                            <div class="navPage_header">
                            <span class="navPage_header--num">01</span>
                            <span class="navPage_header--line"></span>
                            </div>
                            <div class="navPage_text">
                            <span class="navPage_text--en">Plan journey</span>
                            <span class="navPage_text--ch">行程規劃</span>
                            </div>
                            <a href="tour.html" class="navPage_link"></a>
                        </li>
                        <li class="navPage_item">
                            <div class="navPage_header">
                            <span class="navPage_header--num">02</span>
                            <span class="navPage_header--line"></span>
                            </div>
                            <div class="navPage_text">
                            <span class="navPage_text--en">All together</span>
                            <span class="navPage_text--ch">揪團旅行</span>
                            </div>
                            <a href="group.html" class="navPage_link"></a>
                        </li>
                        <li class="navPage_item">
                            <div class="navPage_header">
                            <span class="navPage_header--num">03</span>
                            <span class="navPage_header--line"></span>
                            </div>
                            <div class="navPage_text">
                            <span class="navPage_text--en">Shop</span>
                            <span class="navPage_text--ch">景點門票</span>
                            </div>
                            <a href="shop.html" class="navPage_link"></a>
                        </li>
                        <li class="navPage_item">
                            <div class="navPage_header">
                            <span class="navPage_header--num">04</span>
                            <span class="navPage_header--line"></span>
                            </div>
                            <div class="navPage_text">
                            <span class="navPage_text--en">Postcard</span>
                            <span class="navPage_text--ch">客製明信片</span>
                            </div>
                            <a href="postcard.html" class="navPage_link"></a>
                        </li>
                    </ul>
                </nav>

            </div>
        </div>  
    </div>
    </div>
    <!-- 登入表單 -->
    <div class="froLoginBG" id="froLoginBG">
    <section class="froLoginBlock" id="froLoginBlock">
        <!-- 取消按鈕 -->
        <div class="froLoginCancel">
            <button><i class="bi bi-x-circle-fill"></i></button>
        </div>
        <!-- 註冊/登入 -->
        <div class="froLoginSwitch">
            <div class="froLoginSwitch_btn froLoginSwitch_active" @click="content='login',content2='loginbear'">
                登入
            </div>
            <div class="froLoginSwitch_btn" @click="content='signin',content2='singinbear'">
                註冊
            </div>
        </div> 
        <!-- 表單區 -->
        <transition name="frologintransition" mode="out-in">
            <keep-alive>
                <component :is='content'></component>
            </keep-alive>
        </transition>
        <transition name="mascottransition">
            <component :is='content2'></component>
        </transition>
    </section>
    </div>

        <section class="l-full shopType">
            <div class="shopType_wrap">
                <div class="row">
                    <div class="col-6 col-md-3">
                        <div class="item" style="background-image: url('images/shop/shopType_north.jpg');">
                            <div class="parttxt" data-area="north">
                                <h2>北部</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="item" style="background-image: url('images/shop/shopType_middle.jpg');">
                            <div class="parttxt" data-area="middle">
                                <h2>中部</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="item" style="background-image: url('images/shop/shopType_south.jpg');">
                        <div class="parttxt" data-area="south">
                            <h2>南部</h2>
                        </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="item" style="background-image: url('images/shop/shopType_east.jpg');">
                        <div class="parttxt" data-area="east">
                            <h2>東部</h2>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </section>
    
        
    </header>

    <main>
        <section class="l-full shopSearch">
            <div class="l-large shopSearch_wrap">
                <input id="searchInput" type="search">
                <button class="shopSearchBtn"><i class="bi bi-search"></i></button>
                <style id="m-search"></style>
            </div>
        </section>
        <section class="l-full shopProduct">
            <div class="t-center">
                <h2 class="second-title">
                    <span>Spot</span>
                    推薦景點
                </h2>
            </div>
            <div class="l-medium shopSort_wrap">
                <div class="row" id="card_box"></div>
            </div>
        </section>
    </main>

    <footer class="footer_Wrap">
        <section class="footerBlock">
            <ul class="footerMedia">
                <a href=""><li><i class="bi bi-facebook"></i></li></a>
                <a href=""><li><i class="bi bi-instagram"></i></li></a>
                <a href=""><li><i class="bi bi-line"></i>
                </ion-icon></li></a>
            </ul>
            <ul class="footerContect">
                <li><i class="bi bi-telephone"></i>電話:03-1234567</li>
                <li><i class="bi bi-envelope"></i>服務信箱:<a href="mailto:abc12345@gmail.com">abc12345@gmail.com</a></li>
                <li><i class="bi bi-clock"></i>營業時間:09:00 ~ 18:00(一)~(五)</li>
                <li><i class="bi bi-pin-map"></i>地址:桃園市桃園區中正路99999號</li>
            </ul>
            <ul class="footerTerms">
                <a href=""><li>服務條款</li></a><a href=""><li>購物條款</li></a><a href=""><li>付款方式</li></a>
            </ul>
            <p class="footerCopyRight">&copy;本網站為緯育TibaMe_前端設計工程師班第73期學員專題成果作品，本平台僅供學習、展示之用。若有抵觸有關著作權，或有第三人主張侵害智慧財產權等情事，均由學員負法律上責任，緯育公司概不負責。若有侵權疑慮，您可以私訊[緯育TibaMe]，後續會由專人協助處理。</p>
        </section>
    </footer>

    <script src="./js/burger.js"></script>
    <script src="./js/forlogin.js"></script>
    <script src="./js/loading.js"></script>
    <script>
    
    //---------------抓頁面資料(sql)---------------
        $(document).ready(function(){
            $.ajax({
                type:'GET',
                url: './phps/shop.php',
                dataType: 'json',
                success: function(res){
                // console.log(res);
                   
                    for (let i = 0;i<res.length;i++){
                        let card = document.createElement('div');
                        card.classList.add('card','col-12', 'col-lg-6', 'col-xl-3');
                        card.dataset.index = `${res[i].ticketSpotName},${res[i].cityName},${res[i].cityArea}`;
                    
                        let ticketSpotLink = document.createElement('a');
                        ticketSpotLink.setAttribute('href', `shopspot.html?id=${res[i].ticketSpotNo}`);
                        let card_content =  document.createElement('div');
                        card_content.classList.add('card_content');
                        let card_body =  document.createElement('div');
                        card_body.classList.add('card_body');
                        let card_tag = document.createElement('div');
                        card_tag.classList.add('card_tag');
                        card_tag.innerText = res[i].cityName;
                        let card_img = document.createElement('div');
                        card_img.classList.add('card_img'); 
                        let spot_img = document.createElement('img');
                        spot_img.setAttribute("src", `${res[i].mainImg}`);
                        let card_title = document.createElement('h4');
                        card_title.classList.add('card_title');
                        card_title.innerText = res[i].ticketSpotName;
                        let card_text = document.createElement('div');
                        card_text.classList.add('card_text');
                        card_text.innerText = res[i].ticketSpotIntro;
                        let card_footer = document.createElement('div');
                        card_footer.classList.add('card_footer');
                        let card_shopping = document.createElement('div');
                        card_shopping.classList.add('card_shopping');
                        let card_count = document.createElement('div');
                        card_count.classList.add('card_count');
                        card_count.innerHTML = `NT$<span>${res[i].conTicketPrice}起</span>`
                        document.getElementById('card_box').appendChild(card);
                        card.appendChild(ticketSpotLink);
                        ticketSpotLink.appendChild(card_content);
                        card_content.appendChild(card_body);
                        card_content.appendChild(card_footer);
                        card_body.appendChild(card_tag)
                        card_body.appendChild(card_img)
                        card_img.appendChild(spot_img)
                        card_body.appendChild(card_title)
                        card_body.appendChild(card_text)
                        card_footer.appendChild(card_shopping)
                        card_shopping.appendChild(card_count)
                        // console.log(res[i])
                    }
                },
            }); 
            
    //---------------搜尋---------------
        //(搜尋Bar-關鍵字)
            var that = $(this);
            var mSearch = $("#m-search");
            $('#searchInput').bind("change paste", function(){
              var value = $(this).val();
              if (!value) {
                mSearch.html("");
                return;
              }; 
              mSearch.html('.card:not([data-index*="' + value.toLowerCase() + '"]) {display: none;}');
            });
        
        //(typeBox搜尋)
            var mSearch = $("#m-search");
            $('.parttxt').bind("click", function(){
              var value = $(this)[0].dataset['area'];
              typeBoxSearch(value);
            });
            function getArea(){
               let typeArea = location.search.split('?')[1].split('&')[0].split('=')[1];
               return typeArea;  
            }
            typeBoxSearch(getArea());
            

            function typeBoxSearch(value){
                let sort ="";
              switch(value){
              case "north": 
                sort="北部";
                break;
              case "middle":
                sort="中部";
                break;
              case "south":
                sort="南部";
                break;
              case "east":
                sort="東部";
                break;
              }

              console.log(sort);
            //   console.log(value)
              if (!sort) {
                mSearch.html("");
                return;
              }; 
              
              mSearch.html('.card:not([data-index*="' + sort.toLowerCase() + '"]) {display: none;}');
            }
        });
   </script>
</body>
</html>